@page
@model tbkk.Pages.listOTs.manageCarModel

@{
    ViewData["Title"] = "manageCar";
}

    <div id="content-wrapper">
        <div name="55555" class="card-layout">

            <h1>ReprotOT</h1>
            <ol class="breadcrumb">
                <li class="breadcrumb-item active">Help Desk</li>
                <li class="breadcrumb-item active">Repair</li>
                <li class="breadcrumb-item active">Create</li>
            </ol>

            <p hidden>
                <a asp-page="Create">Create New</a>
            </p>
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].TimeStart)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].TimeEnd)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].Hour)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].Type)
                        </th>

                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].Status)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].Part)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].FoodSet)
                        </th>

                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].OT)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DetailOT[0].Employee)
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <input type="text" name="data[][]" value="">
                    }
                    @*@{ for (int i =1;i<=31;i++) {
                       for (int j= 0; i< Model.DetailOT.Count;j++)
                        {
                            if ()
                            {

                            }

                        }
                    }

                    }*@



                    @foreach (var item in Model.DetailOT)

                    {


                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.TimeStart)

                                <input type="text" name="t2[]" value="@item.TimeStart">
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TimeEnd)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Hour)

                                <input type="text" name="t1[]" value="@item.Hour">
                                <h1>item.Hour</h1>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Type)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.Status)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Part.PartID)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FoodSet.FoodSetID)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.OT.OTID)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Employee.EmployeeID)
                            </td>
                            <td>
                                <a asp-page="./Edit" asp-route-id="@item.DetailOTID">Edit</a> |
                                <a asp-page="./Details" asp-route-id="@item.DetailOTID">Details</a> |
                                <a asp-page="./Delete" asp-route-id="@item.DetailOTID">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>



                <script>
                    @*var date [][];
                    for (int i = 1; i <= 31; i++) {
                        var c = 0;
                        var a = document.getElementsByName("t2[]").values
                        for (int j = 0; j < @Model.DetailOT; j++) {
                            if (i == a[j].da) {

                            }


                        }

                    }*@
                </script>





            </table>

            <canvas id="test1" style="max-width: 500px;"></canvas>
            <script>
                var date = $("input[name='t2[]']").map(function () { return $(this).val(); }).get();
                var values = $("input[name='t1[]']").map(function () { return $(this).val(); }).get();
                var ctx = document.getElementById("test1");
                var aDate = new Array();
                for (var i = 0; i < date.length; i++) {
                    var nDate = date[i].substr(0, 2);
                    aDate[nDate] = 1 + (aDate[nDate] || 0);
                    //alert(nDate);
                }
                alert([Array(3).keys()]);
                var myLineChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        //labels: aDate.keys(),
                        datasets: [{
                            label: "Sessions",
                            lineTension: 0.3,
                            backgroundColor: "rgba(2,117,216,0.2)",
                            borderColor: "rgba(2,117,216,1)",
                            pointRadius: 5,
                            pointBackgroundColor: "rgba(2,117,216,1)",
                            pointBorderColor: "rgba(255,255,255,0.8)",
                            pointHoverRadius: 5,
                            pointHoverBackgroundColor: "rgba(2,117,216,1)",
                            pointHitRadius: 50,
                            pointBorderWidth: 2,
                            data: aDate,
                        }],
                    },
                    options: {
                        scales: {
                            xAxes: [{
                                time: {
                                    unit: 'date'
                                },
                                gridLines: {
                                    display: false
                                },
                                ticks: {
                                    maxTicksLimit: 7
                                }
                            }],
                            yAxes: [{
                                ticks: {
                                    min: 0,
                                    max: 5,
                                    maxTicksLimit: 5
                                },
                                gridLines: {
                                    color: "rgba(0, 0, 0, .125)",
                                }
                            }],
                        },
                        legend: {
                            display: false
                        }
                    }
                });
            </script>
            @*<canvas id="myAreaChart" style="max-width: 500px;"></canvas>
            <canvas id="myBarChart" style="max-width: 500px;"></canvas>*@

            <!-- <script src="~/js/demo/chart-area-demo2.js"></script> -->


        </div>
        <!-- /.container-fluid -->
       
    </div>






@section Scripts {
    <script>
        var nav = document.getElementById("Management");
        var nav2 = document.getElementById("Management OT");
        @{ if (Model.Employee.Position.PositionName.Equals("Manager") || Model.Employee.Position.PositionName.Equals("admin"))
            {
                @:nav.style.display = "block";
            }
            if (Model.Employee.Department.DepartmentName.Equals("Human Resource") || Model.Employee.Position.PositionName.Equals("admin"))
            {
                @:nav2.style.display = "block";
            }
        }
         var name = document.getElementById("nav_name").innerHTML = "Name: @Model.Employee.FirstName @Model.Employee.LastName Position: @Model.Employee.Position.PositionName";
        var img = document.getElementById("myImg").src = "/Upload/@Model.Employee.Image";
    </script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

